Vue.component("skin-item",{props:{data:{type:Object,required:!0},selected:{type:Boolean,required:!0},index:Number},computed:{download_link(){return this.data.download||"https://aneyo.github.io/risa/s/"+this.data.id+".osk"},download_name(){return(this.data.id||"skin.risa")+".osk"}},mounted(){this.selected&&this.$nextTick(()=>setTimeout(this.scrollTo,100))},methods:{scrollTo(){this.$el.ownerDocument.documentElement.scrollTop=81*this.index},select(){this.$emit("select",this.data.id)}},template:'\n  <div class="skin">\n    <preview-widget\n      :thumbnail="data.thumbnail"\n      :album="data.img"\n      :video="data.v"\n      :large="selected"\n      :nsfw="data.nsfw"\n      :id="data.id"\n    ></preview-widget>\n    <div class="info-block">\n      <div class="meta">\n        <a class="meta-name" :href="\'#\'+data.id" @click.prevent="select">{{data.name}} <approved v-if="data.approve"></approved></a>\n        <div class="meta-tags">\n          <span class="nsfw tag" v-if="data.nsfw"></span>\n          <span :class="[data.mod?\'modded\':\'original\',\'tag\']"></span>\n        </div>\n        <div class="meta-author">\n          by\n          <a class="author-link" target="_blank" rel="noreferrer" :href="data.alink" >{{data.author}}</a>\n        </div>\n      </div>\n      <div class="other">\n        <a class="source-button" target="_blank" rel="noreferrer" :href="data.link" v-if="data.link">\n          <i class="fas fa-book"></i>\n        </a>\n        <a class="video-button" target="_blank" rel="noreferrer" :href="data.v" v-if="data.v">\n          <i class="fab fa-youtube"></i>\n        </a>\n      </div>\n    </div>\n    <div class="download-button">\n      <a :href="download_link" :download="download_name">\n        <i class="fas fa-download"></i>\n      </a>\n    </div>\n  </div>'}),Vue.component("preview-widget",{props:{thumbnail:String,album:Array,video:String,skinId:{type:String,required:!1},large:{type:Boolean,required:!0,default:!1},nsfw:{type:Boolean,required:!1,default:!1}},computed:{hasImages(){return this.album&&this.album.length>0}},methods:{swipe(e){this.$refs.album.scroll(this.$refs.album.scrollLeft+this.$el.offsetWidth*e,0)}},template:'\n  <div class="preview" :class="{nsfw}">\n    <div v-if="large && hasImages" class="album-controls">\n      <a class="album-control" href="#" @click.prevent="swipe(-1)">\n        <i class="fas fa-angle-left"></i>\n      </a>\n      <a class="album-control" href="#" @click.prevent="swipe(1)">\n        <i class="fas fa-angle-right"></i>\n      </a>\n    </div>\n\n    <div v-if="large && hasImages" ref="album" key="large-preview" class="lazy-album">\n      <lazy v-for="image in album" :key="image" class="album-image" :src="image"></lazy>\n    </div>\n    <lazy v-else-if="thumbnail" key="small-preview" class="lazy-preview" :src="thumbnail"></lazy>\n  </div>'}),Vue.component("lazy",{props:{src:{type:String,required:!0}},data:()=>({loading:!0}),computed:{isLoading(){return{display:this.loading?"none":null}}},template:'\n  <div :class="{ loading }">\n    <i v-if="loading && src" class="loader fas fa-spinner"></i>\n    <img v-if="src" :src="src" :style="isLoading" @load="loading = false"></img>\n  </div>'}),Vue.component("approved",{functional:!0,render:e=>e("i",{class:"fas fa-medal",attrs:{title:"Approved by aneyo, idk if you should trust him"},style:"color: gold"})});const DATA_URL="./meta.json";new Vue({el:"body > div:first-child",name:"Risa",data:{window:{width:0,height:0},list:{data:null,show:null,query:null,error:null,fuse:{base:null,options:{shouldSort:!0,threshold:.3,keys:[{name:"name",weight:.5},{name:"author",weight:.3},{name:"index",weight:.2}]}},selected:null},menu:{opened:!1,theme:null},themes:["milk-light","cute-brown","deep-dark"]},computed:{compact(){return this.window.width<=700},iconMenuSwitcher(){return[this.menu.opened?"fa-caret-square-up":"fa-paint-brush"]}},created(){this.list.selected=document.location.hash.slice(1,document.location.hash.length),this.fetchData(DATA_URL),window.addEventListener("resize",this.$_onResize),this.$_onResize()},mounted(){this.theme()},destroyed(){window.removeEventListener("resize",this.$_onResize)},methods:{$_onResize(){this.window.width=window.innerWidth,this.window.height=window.innerHeight},fetchData(e){fetch(e).then(e=>{if(e.ok)return e.json();throw Error(e.statusText)}).then(this.processData).catch(e=>{this.list.error=e})},processData(e){this.list.data=e.skins.filter(this.skinFilter),this.list.show=this.list.data,this.list.fuse.base=new Fuse(this.list.data,this.list.fuse.options)},skinFilter:e=>e.id||!e.hidden,searchForData(){this.list.query?this.list.show=this.list.fuse.base.search(this.list.query):this.list.show=this.list.data},selectSkin(e){e&&(e===this.list.selected?this.list.selected=null:this.list.selected=e)},theme(e){e||(e=this.$cookies.get("theme")),this.$cookies.get("theme")!==e&&this.$cookies.set("theme",e),this.$el.ownerDocument.documentElement.className=this.menu.theme=e}}});