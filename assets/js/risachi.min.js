Vue.component("skin-item",{props:{data:{type:Object,required:!0},selected:{type:Boolean,required:!0},index:Number},computed:{link(){return`${document.location.origin}/#${this.data.id}`},name(){return null!=this.data.names&&this.data.names.length>0?this.data.names[0]:"(Unknown Skin Name)"},flags(){return null==this.data.flags?{}:this.data.flags},author(){return null==this.data.author?{}:this.data.author},links(){return null==this.data.links?{}:this.data.links},preview(){return null==this.data.preview?{}:this.data.preview},fileLink(){return null!=this.data.links&&null!=this.data.links.download?this.data.links.download:`${document.location.origin}/download/${this.data.id}.osk`},fileName(){return null!=this.data.names&&this.data.names.length>0?`${this.data.names[0]}.osk`:`${this.data.id||"a_skin"}.osk`},copyID(){return`copy-${this.data.id}`}},mounted(){this.selected&&this.$nextTick(()=>setTimeout(this.scrollTo,250))},methods:{scrollTo(){this.$el.ownerDocument.documentElement.scrollTop=81*this.index},select(){this.$emit("select",this.data.id)},copy(){let e=document.querySelector(`#${this.copyID}`);e.setAttribute("type","text"),e.select();try{document.execCommand("copy")}catch(e){console.error(e)}e.setAttribute("type","hidden"),window.getSelection().removeAllRanges()}},template:'\n  <div class="skin">\n    <preview-component\n      :id="data.id"\n      :data="preview"\n      :nsfw="flags.nsfw"\n      :large="selected"\n    ></preview-component>\n    <div class="info-block">\n      <div class="meta">\n        <a class="meta-name" :href="link" @click.prevent="select">{{name}} <approved v-if="data.gold"></approved></a>\n        <div class="meta-tags">\n          <span class="nsfw tag" v-if="flags.nsfw"></span>\n          <span :class="[flags.modded?\'modded\':\'original\',\'tag\']"></span>\n        </div>\n        <div class="meta-author">\n          by\n          <a class="author-link" target="_blank" rel="noreferrer" :href="author.link" >{{author.name}}</a>\n        </div>\n      </div>\n      <div class="other">\n        <a class="copy-button" :href="link" @click.prevent="copy">\n          <i class="fas fa-clipboard"></i>\n        </a>\n        <a class="source-button" target="_blank" rel="noreferrer" :href="links.origin" v-if="links.origin">\n          <i class="fas fa-book"></i>\n        </a>\n        <a class="video-button" target="_blank" rel="noreferrer" :href="preview.video" v-if="preview.video">\n          <i class="fab fa-youtube"></i>\n        </a>\n        <input type="hidden" :id="copyID" :value="link">\n      </div>\n    </div>\n    <div class="download-button">\n      <a :href="fileLink" :download="fileName" target="_blank">\n        <i class="fas fa-download"></i>\n      </a>\n    </div>\n  </div>'}),Vue.component("preview-component",{props:{data:Object,skinId:{type:String,required:!1},large:{type:Boolean,required:!0,default:!1},nsfw:{type:Boolean,required:!1,default:!1}},computed:{hasData(){return null!=this.data},hasImages(){return this.hasData&&null!=this.data.big&&this.data.big.length>0},hasThumb(){return this.hasData&&(null!=this.data.small||null!=this.data.video)},thumbnail(){return null!=this.data.small?this.data.small:null!=this.data.video?this.videoThumbnail:null},videoThumbnail(){if(!this.hasData||null==this.data.video)return null;let e=new URL(this.data.video),t=e.searchParams.get("v");return null==t&&(t=e.pathname.slice(1,e.pathname.length)),`https://img.youtube.com/vi/${t}/mqdefault.jpg`}},methods:{swipe(e){this.$refs.album.scroll(this.$refs.album.scrollLeft+this.$el.offsetWidth*e,0)}},template:'\n  <div class="preview" :class="{nsfw}">\n    <div v-if="large && hasImages" class="album-controls">\n      <a class="album-control" href="#" @click.prevent="swipe(-1)">\n        <i class="fas fa-angle-left"></i>\n      </a>\n      <a class="album-control" href="#" @click.prevent="swipe(1)">\n        <i class="fas fa-angle-right"></i>\n      </a>\n    </div>\n\n    <div v-if="large && hasImages" ref="album" key="large-preview" class="lazy-album">\n      <lazy v-for="(screenshot, index) in data.big" :key="index" class="album-image" :src="screenshot"></lazy>\n    </div>\n    <lazy v-else-if="hasThumb" key="small-preview" class="lazy-preview" :src="thumbnail"></lazy>\n  </div>'}),Vue.component("lazy",{props:{src:{type:String,required:!0}},data:()=>({loading:!0}),computed:{isLoading(){return{display:this.loading?"none":null}}},template:'\n  <div :class="{ loading }">\n    <i v-if="loading && src" class="loader fas fa-spinner"></i>\n    <img v-if="src" :src="src" :style="isLoading" @load="loading = false"></img>\n  </div>'}),Vue.component("approved",{functional:!0,render:e=>e("i",{class:"fas fa-star",attrs:{title:'"A Gold award I guess? aneyo likes this skin, cool shit"'},style:"color: gold"})});const DATA_URL="https://gist.githubusercontent.com/aneyo/c92396022314311bd7fe6556b01fb630/raw/data.json";new Vue({el:"body > div:first-child",name:"Risa",data:{window:{width:0,height:0},listing:{data:null,updated:null,show:null,query:null,error:null,fuse:{base:null,options:{shouldSort:!0,threshold:.3,keys:[{name:"names",weight:.5},{name:"author.name",weight:.3},{name:"tags",weight:.2}]}},selected:null},menu:{opened:!1,theme:null},themes:["milk-light","cute-brown","deep-dark"]},computed:{iconMenuSwitcher(){return[this.menu.opened?"fa-caret-square-up":"fa-paint-brush"]}},created(){this.listing.selected=document.location.hash.slice(1,document.location.hash.length),this.fetchData(DATA_URL)},mounted(){this.theme()},methods:{fetchData(e){fetch(e).then(e=>{if(e.ok)return e.json();throw Error(e.statusText)}).then(this.processData).catch(e=>{this.listing.error=e})},processData(e){this.listing.updated=new Date(e.updated),this.listing.data=e.listing.filter(this.skinFilter),this.listing.show=this.listing.data,this.listing.fuse.base=new Fuse(this.listing.data,this.listing.fuse.options)},skinFilter:e=>e.id||!e.hide,searchForData(){this.listing.query?this.listing.show=this.listing.fuse.base.search(this.listing.query):this.listing.show=this.listing.data},selectSkin(e){e&&(e===this.listing.selected?this.listing.selected=null:this.listing.selected=e)},theme(e){e||(e=this.$cookies.get("theme")),this.$cookies.get("theme")!==e&&this.$cookies.set("theme",e),this.$el.ownerDocument.documentElement.className=this.menu.theme=e}}});