Vue.component("skin",{props:["data","selected","index"],template:'\n  <div class="skin">\n    <preview\n      :thumbnail="data.thumbnail"\n      :album="data.img"\n      :video="data.v"\n      :large="selected"\n      :nsfw="data.nsfw"\n      :id="data.id"\n      />\n    <div info-block>\n      <div meta>\n        <a meta-name :href="\'#\'+data.id" @click="$emit(\'select\', data.id)">{{data.name}}</a>\n        <div meta-tags>\n          <span class="nsfw tag" v-if="data.nsfw"></span>\n          <span :class="[data.mod?\'modded\':\'original\',\'tag\']"></span>\n        </div>\n        <div meta-author>by <a class="author-link" :href="data.alink">{{data.author}}</a></div>\n      </div>\n      <div other>\n        <a source-button :href="data.link" v-if="data.link"><i class="fas fa-book"></i></a>\n        <a video-button :href="data.v" v-if="data.v"><i class="fab fa-youtube"></i></a>\n      </div>\n    </div>\n    <div download-button>\n      <a :href="download_link" :download="download_name"><i class="fas fa-download"></i></a>\n    </div>\n  </div>',computed:{download_link(){return this.data.download||"https://aneyo.github.io/risa/s/"+this.data.id+".osk"},download_name(){return(this.data.id||"skin.risa")+".osk"}},mounted(){this.selected&&this.$nextTick(()=>setTimeout(this.scrollTo,100))},methods:{scrollTo(){this.$el.ownerDocument.documentElement.scrollTop=81*this.index}}}),Vue.component("preview",{props:["thumbnail","album","video","large","nsfw","id"],template:'\n  <div class="preview" :class="{nsfw}">\n    <div class="album-controls" v-if="large && album && album.length > 0">\n      <a album-control href="#" @click.prevent="swipe(-1)"><i class="fas fa-angle-left"></i></a>\n      <a album-control href="#" @click.prevent="swipe(1)"><i class="fas fa-angle-right"></i></a>\n    </div>\n    <div class="lazy-album" v-if="large" ref="album">\n      <lazy class="album-image" :src="image" :key="image" v-for="image in album"></lazy>\n    </div>\n    <lazy class="lazy-preview" :src="thumbnail" v-else/>\n  </div>',methods:{swipe(e){this.$refs.album.scroll(this.$refs.album.scrollLeft+this.$el.offsetWidth*e,0)}}}),Vue.component("lazy",{props:["src"],data:()=>({loading:!0}),template:'\n  <div :class="{loading}">\n    <i class="loader fas fa-spinner" v-if="loading && src"></i>\n    <img :src="src" @load="onLoad" :style="{ display: loading ? \'none\':null }" v-if="src"/>\n  </div>',methods:{onLoad(){this.loading=!1}}});const DATA_URL="./meta.json";new Vue({el:"body > div:first-child",data:{window:{width:0,height:0},list:{data:null,show:null,query:null,error:null,fuse:{base:null,options:{shouldSort:!0,threshold:.3,keys:[{name:"name",weight:.5},{name:"author",weight:.3},{name:"index",weight:.2}]}},selected:null},menu:{opened:!1,theme:null},themes:["milk-light","cute-brown","deep-dark"]},computed:{compact(){return this.window.width<=700}},created(){this.list.selected=document.location.hash.slice(1,document.location.hash.length),this.fetchData(DATA_URL),window.addEventListener("resize",this._onResize),this._onResize()},mounted(){this.theme()},destroyed(){window.removeEventListener("resize",this._onResize),this._onResize()},methods:{_onResize(){this.window.width=window.innerWidth,this.window.height=window.innerHeight},fetchData(e){fetch(e).then(e=>{if(e.ok)return e.json();throw Error(e.statusText)}).then(this.processData).catch(e=>{this.list.error=e})},processData(e){this.list.data=e.skins,this.list.show=this.list.data,this.list.fuse.base=new Fuse(this.list.data,this.list.fuse.options)},searchForData(){this.list.query?this.list.show=this.list.fuse.base.search(this.list.query):this.list.show=this.list.data},selectSkin(e){e&&(e===this.list.selected?this.list.selected=null:this.list.selected=e)},theme(e){e||(e=this.$cookies.get("theme")),this.$cookies.get("theme")!==e&&this.$cookies.set("theme",e),this.$el.ownerDocument.documentElement.className=e,this.menu.theme=e}}});