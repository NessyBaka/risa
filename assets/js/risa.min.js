let d={found:[],showing:[],indexes:void 0,skins:void 0,_m:void 0,video:null,skinID:null,max:6,_search_query:void 0,_page_now:0,_skin:null,get search_query(){return this._search_query},get page(){return this._page_now},get modal(){return this._skin},set search_query(query){this._search_query=query||"",this.search(this._search_query)},set page(page_query){this._page_now=page_query>=0?page_query:0,this.show(this._page_now)},set modal(skin_ID){this.skinID=skin_ID,this._skin=this.searchSkin(skin_ID)},start:()=>{d.grab("./meta.json?t="+Date.now()).then(_=>{d.checkHashAtStart(),d.search()}).catch(e=>console.log(e))},grab:(p="./meta.json")=>new Promise((done,oof)=>{fetch(p).then(r=>{r.json().then(j=>{d._meta=j,d.indexes=j.index,d.skins=j.skins,done()}).catch(e=>console.error(e))}).catch(e=>{console.error(e)})}),search:query=>{if(d.page=0,!query)return d.found=d.skins,void d.show(0);let found=[],qpattern=new RegExp(query.replace(/[-\/\\^$*+?.()|[\]{}]/g,"\\$&"),"i"),length=d.indexes.length;for(var i=0;i<length;i++)qpattern.test(d.indexes[i])&&found.push(d.skins[i]);d.found=found,d.show(0)},show:page=>{d.showing=[];let l=d.found.length;for(var i=page*d.max;i<page*d.max+d.max&&!(i>=l);i++)d.showing.push(d.found[i])},checkHashAtStart(){d.modal=document.location.hash.substr(1,document.location.hash.length)},searchSkin(ID){if(null==ID)return ID;let l=d.skins.length;for(let i=0;i<l;i++)if(d.skins[i].id==ID)return d.skins[i];return null},closeSkinCard(){document.location.href="#",d.vskin=null}},f={},risa=new Vue({el:"#risa",data:d,methods:cm});Object.assign(cm,f),d.start();